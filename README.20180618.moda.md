#	MODa

##	20180618

SpacePlant processing and comparison

2 folders "control" and "space"


Many mgf files in each.




RyuLab@SpacePlant /cygdrive/d/SpacePlant
$ ll */*config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150729_PB_MIX1_SOL_Frac1.config
-r--r--r--+ 1 RyuLab 5410 Jun 18 17:46 control/20150729_PB_MIX1_SOL_Frac10.config
-r--r--r--+ 1 RyuLab 5410 Jun 18 17:46 control/20150729_PB_MIX1_SOL_Frac11.config
-r--r--r--+ 1 RyuLab 5410 Jun 18 17:46 control/20150729_PB_MIX1_SOL_Frac12.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150729_PB_MIX1_SOL_Frac2.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150729_PB_MIX1_SOL_Frac3.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150729_PB_MIX1_SOL_Frac4.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150729_PB_MIX1_SOL_Frac5.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150729_PB_MIX1_SOL_Frac6.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150729_PB_MIX1_SOL_Frac7.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150729_PB_MIX1_SOL_Frac8.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150729_PB_MIX1_SOL_Frac9.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150730_PB_MIX2_SOL_Frac1.config
-r--r--r--+ 1 RyuLab 5410 Jun 18 17:46 control/20150730_PB_MIX2_SOL_Frac10.config
-r--r--r--+ 1 RyuLab 5410 Jun 18 17:46 control/20150730_PB_MIX2_SOL_Frac11.config
-r--r--r--+ 1 RyuLab 5410 Jun 18 17:46 control/20150730_PB_MIX2_SOL_Frac12.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150730_PB_MIX2_SOL_Frac2.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150730_PB_MIX2_SOL_Frac3.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150730_PB_MIX2_SOL_Frac4.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150730_PB_MIX2_SOL_Frac5.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150730_PB_MIX2_SOL_Frac6.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150730_PB_MIX2_SOL_Frac7.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150730_PB_MIX2_SOL_Frac8.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150730_PB_MIX2_SOL_Frac9.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150814_PB_MIX1_MEM_Frac1.config
-r--r--r--+ 1 RyuLab 5410 Jun 18 17:46 control/20150814_PB_MIX1_MEM_Frac10.config
-r--r--r--+ 1 RyuLab 5410 Jun 18 17:46 control/20150814_PB_MIX1_MEM_Frac11.config
-r--r--r--+ 1 RyuLab 5410 Jun 18 17:46 control/20150814_PB_MIX1_MEM_Frac12.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150814_PB_MIX1_MEM_Frac2.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150814_PB_MIX1_MEM_Frac3.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150814_PB_MIX1_MEM_Frac4.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150814_PB_MIX1_MEM_Frac5.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150814_PB_MIX1_MEM_Frac6.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150814_PB_MIX1_MEM_Frac7.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150814_PB_MIX1_MEM_Frac8.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150814_PB_MIX1_MEM_Frac9.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150815_PB_MIX2_MEM_Frac1.config
-r--r--r--+ 1 RyuLab 5410 Jun 18 17:46 control/20150815_PB_MIX2_MEM_Frac10.config
-r--r--r--+ 1 RyuLab 5410 Jun 18 17:46 control/20150815_PB_MIX2_MEM_Frac11.config
-r--r--r--+ 1 RyuLab 5410 Jun 18 17:46 control/20150815_PB_MIX2_MEM_Frac12.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150815_PB_MIX2_MEM_Frac2.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150815_PB_MIX2_MEM_Frac3.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150815_PB_MIX2_MEM_Frac4.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150815_PB_MIX2_MEM_Frac5.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150815_PB_MIX2_MEM_Frac6.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150815_PB_MIX2_MEM_Frac7.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150815_PB_MIX2_MEM_Frac8.config
-r--r--r--+ 1 RyuLab 5409 Jun 18 17:46 control/20150815_PB_MIX2_MEM_Frac9.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150729_PB_MIX1_SOL_Frac1.config
-r--r--r--+ 1 RyuLab 3382 Jun 18 16:46 space/20150729_PB_MIX1_SOL_Frac10.config
-r--r--r--+ 1 RyuLab 3382 Jun 18 16:46 space/20150729_PB_MIX1_SOL_Frac11.config
-r--r--r--+ 1 RyuLab 3382 Jun 18 16:46 space/20150729_PB_MIX1_SOL_Frac12.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150729_PB_MIX1_SOL_Frac2.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150729_PB_MIX1_SOL_Frac3.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150729_PB_MIX1_SOL_Frac4.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150729_PB_MIX1_SOL_Frac5.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150729_PB_MIX1_SOL_Frac6.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150729_PB_MIX1_SOL_Frac7.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150729_PB_MIX1_SOL_Frac8.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150729_PB_MIX1_SOL_Frac9.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150730_PB_MIX2_SOL_Frac1.config
-r--r--r--+ 1 RyuLab 3382 Jun 18 16:46 space/20150730_PB_MIX2_SOL_Frac10.config
-r--r--r--+ 1 RyuLab 3382 Jun 18 16:46 space/20150730_PB_MIX2_SOL_Frac11.config
-r--r--r--+ 1 RyuLab 3382 Jun 18 16:46 space/20150730_PB_MIX2_SOL_Frac12.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150730_PB_MIX2_SOL_Frac2.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150730_PB_MIX2_SOL_Frac3.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150730_PB_MIX2_SOL_Frac4.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150730_PB_MIX2_SOL_Frac5.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150730_PB_MIX2_SOL_Frac6.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150730_PB_MIX2_SOL_Frac7.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150730_PB_MIX2_SOL_Frac8.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150730_PB_MIX2_SOL_Frac9.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150814_PB_MIX1_MEM_Frac1.config
-r--r--r--+ 1 RyuLab 3382 Jun 18 16:46 space/20150814_PB_MIX1_MEM_Frac10.config
-r--r--r--+ 1 RyuLab 3382 Jun 18 16:46 space/20150814_PB_MIX1_MEM_Frac11.config
-r--r--r--+ 1 RyuLab 3382 Jun 18 16:46 space/20150814_PB_MIX1_MEM_Frac12.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150814_PB_MIX1_MEM_Frac2.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150814_PB_MIX1_MEM_Frac3.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150814_PB_MIX1_MEM_Frac4.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150814_PB_MIX1_MEM_Frac5.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150814_PB_MIX1_MEM_Frac6.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150814_PB_MIX1_MEM_Frac7.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150814_PB_MIX1_MEM_Frac8.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150814_PB_MIX1_MEM_Frac9.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150815_PB_MIX2_MEM_Frac1.config
-r--r--r--+ 1 RyuLab 3382 Jun 18 16:46 space/20150815_PB_MIX2_MEM_Frac10.config
-r--r--r--+ 1 RyuLab 3382 Jun 18 16:46 space/20150815_PB_MIX2_MEM_Frac11.config
-r--r--r--+ 1 RyuLab 3382 Jun 18 16:46 space/20150815_PB_MIX2_MEM_Frac12.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150815_PB_MIX2_MEM_Frac2.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150815_PB_MIX2_MEM_Frac3.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150815_PB_MIX2_MEM_Frac4.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150815_PB_MIX2_MEM_Frac5.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150815_PB_MIX2_MEM_Frac6.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150815_PB_MIX2_MEM_Frac7.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150815_PB_MIX2_MEM_Frac8.config
-r--r--r--+ 1 RyuLab 3381 Jun 18 16:46 space/20150815_PB_MIX2_MEM_Frac9.config




cp foo.txt base_config.txt


DELETE all of the Spectra


for i in *mgf; do
o=${i%.mgf}
echo $i $o
echo -e "Spectra=$i\r\r" > $o.config
cat base_config.txt >> $o.config
done




I created a .config file for each .mgf file, then I started a for loop processing each .config file producing a .config.out file.

I added a README file in both space/ and control/ describing what I did / am doing.


I copied moda_v1.51.jar file to the SpacePlant folder as just moda.jar. For some reason, using the full name wasn't working for me. I also wrote a little script called moda.bash


#!/usr/bin/env bash

echo "Running"

for i in ${1}*config; do
o=${i%.mgf}
echo $i $o
java -Xmx5000M -jar ../moda.jar -i $i -o $o.out
done

And I ran the following 4 commands in both the control and space directories so I've got 8 processes going.

../moda.bash 20150729 > 20150729.log &
../moda.bash 20150730 > 20150730.log &
../moda.bash 20150814 > 20150814.log &
../moda.bash 20150815 > 20150815.log &

It is now using about 55% of the CPU and about 20% of the memory. I'd like to do more, but I'd like to keep the machine usable so I think that we should keep this running as is.

I'm disconnected so you are welcome to login and check on it as you like.



actually modified moda.bash to select based on numeric "Frac" suffix so could run 12 at once.


